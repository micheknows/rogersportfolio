{% extends "base.html" %}

{% block content %}
  <h1>Edit Portfolio Item</h1>
  <form method="post" enctype="multipart/form-data">
    {{ form.hidden_tag() }}
    <div class="form-group">
      <label for="title">Title</label>
      {{ form.title(class="form-control", required="required") }}
    </div>
    <div class="form-group">
      <label for="short_desc">Short Description</label>
      {{ form.short_desc(class="form-control", required="required") }}
      <label for="long_desc">Long Description</label>
       {{ form.long_desc(class="form-control", required="required") }}
    </div>
    <div class="form-group">
      <label for="image">Image</label>
      <input type="file" name="image" class="form-control-file">
    </div>
<div class="form-group">
  <label for="tags">Tags</label>
  <select name="tags" multiple class="form-control">
    {% for tag in tags %}
      <option value="{{ tag.id }}"
      {% if tag in item.tags %}
        selected
      {% endif %}>
        {{ tag.name }}
      </option>
    {% endfor %}
  </select>
</div>

<div class="form-group">
  <label for="subtags">Subtags</label>
  <select name="subtags" multiple class="form-control">
    {% for subtag in subtags %}
      <option value="{{ subtag.id }}"
      {% if subtag in item.subtags %}
        selected
      {% endif %}>
        {{ subtag.name }}
      </option>
    {% endfor %}
  </select>
</div>


    <div class="form-group">
      <input type="submit" value="Save" class="btn btn-primary">
      <a href="{{ url_for('views.portfolio') }}" class="btn btn-secondary">Cancel</a>
    </div>
  </form>
  {% if item.image %}
    <img src="data:image/jpeg;base64,{{ b64encode(item.image).decode('utf-8') }}" class="img-thumbnail" width="200">
  {% endif %}
{% endblock %}
